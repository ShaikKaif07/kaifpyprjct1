import requests
import json
from datetime import datetime

def get_weather_data(api_key, city):
    """Fetches weather data from OpenWeatherMap API."""
    base_url = "http://api.openweathermap.org/data/2.5/weather?"
    complete_url = base_url + "appid=" + api_key + "&q=" + city
    response = requests.get(complete_url)
    if response.status_code == 200:
        return response.json()
    else:
        return None

def display_weather_data(weather_data):
    """Displays weather information."""
    if weather_data:
        main = weather_data['main']
        temp = main['temp'] - 273.15  # Convert Kelvin to Celsius
        feels_like = main['feels_like'] - 273.15  # Convert Kelvin to Celsius
        humidity = main['humidity']
        description = weather_data['weather'][0]['description']
        timestamp = datetime.fromtimestamp(weather_data['dt'])

        print(f"Weather in {weather_data['name']} at {timestamp.strftime('%Y-%m-%d %H:%M:%S')}:")
        print(f"Temperature: {temp:.1f}°C")
        print(f"Feels Like: {feels_like:.1f}°C")
        print(f"Humidity: {humidity}%")
        print(f"Description: {description}")
    else:
        print("City not found or API error.")

if __name__ == "__main__":
    api_key = "a23f8f0ffc26e775550e58960edaa6d1"  # Replace with your OpenWeatherMap API key
    city = input("Enter city name: ")
    weather_data = get_weather_data(api_key, city)
    display_weather_data(weather_data)

    # For continuous monitoring, you can add a loop:
    while True:
        weather_data = get_weather_data(api_key, city)
        display_weather_data(weather_data)
        time.sleep(60)  # Update every minute
